#include "Time.h"
#include <iostream>

#include <stack>
#include <vector>
using namespace std;

typedef stack<Time>St;//стек
typedef vector<Time>Vec;//вектор

St make_stack(int n)
{
	St s;
	Time t;
	for (int i = 0; i < n; i++)
	{
		cin >> t;//ввод переменной
		s.push(t);//добавление ее в стек
	}
	return s;//вернуть стек как результат функции
}
//копирует стек в вектор
Vec copy_stack_to_vector(St s)
{
	Vec v;
	while (!s.empty())//пока стек не пустой
	{
		//добавить в вектор элемент из вершиы стека
		v.push_back(s.top());
		s.pop();
	}
	return v; //вернуть вектор как результат функции
}
//копирует вектор в стек
St copy_vector_to_stack(Vec v)
{
	St s;
	for (int i = 0; i < v.size(); i++)
	{
		s.push(v[i]);//добавить в стек элемент вектора
	}
	return s; //вернуть стек как результат функции
}
void print_stack(St s)
{
	//копируем стек в вектор
	Vec v = copy_stack_to_vector(s);
	while (!s.empty())//пока стек не пустой
	{
		cout << s.top() << endl;//вывод элемента в вершине стека
		s.pop();//удаляем элемент из вершины
	}
	//копируем вектор в стек
	s = copy_vector_to_stack(v);
}
//вычисление среднего значения
Time Srednee(St s)
{

	Vec v = copy_stack_to_vector(s);//копируем стек в вектор
	int n = 1;
	Time sum = s.top();//начальное значениедля суммы
	s.pop();//удалить первый элемент из вектора
	while (!s.empty())//пока стек не пустой
	{
		sum = sum + s.top();//добавить в сумму элемент из вершины стека
		s.pop();//удалить элемент
		n++;
	}
	s = copy_vector_to_stack(v);//скопировать вектор в стек
	return sum / n; //вернуть среднее арифметическое
}
//добавление элемента в стек
void Add_to_stack(St& s, Time el, int pos)
{
	Vec v;
	Time t;
	int i = 1;//номер элемента в стеке
	while (!s.empty())//пока стек не пустой
	{
		t = s.top();//получить элемент из вершины
		//если номер равен номеру позиции, на котоую добвляем элемент
		if (i == pos)v.push_back(el);//добавить новый элемент в вектор
		v.push_back(t);//добавить элемент из стека в вектор
		s.pop();//удалить элемент из стека
		i++;
	}
	s = copy_vector_to_stack(v);//копируем вектор в стек
}
//поиск максимального элемента в стеке
Time Max(St s)
{
	Time m = s.top();//переменной m присваиваем значение из вершины стека
	Vec v = copy_stack_to_vector(s);//копируем стек в вектор
	while (!s.empty())//пока стк не пустой
	{
		if (s.top() > m)m = s.top();//срвниваем m и элемнт в вершине стека
		s.pop();//удаляем элемент из стека
	}
	s = copy_vector_to_stack(v);//копиуем вектор в стек

	return m; //возвращаем m
}
//поиск минимального элемента
Time Min(St s)
{
	Time m = s.top();
	Vec v = copy_stack_to_vector(s);
	while (!s.empty())
	{
		if (s.top() < m)m = s.top();
		s.pop();
	}
	s = copy_vector_to_stack(v);
	return m;
}
//Удалить максимальный элемент из стека
void Delete_from_stack(St& s)
{
	Time m = Min(s);//
	Vec v;
	Time t;
	while (!s.empty())//пока стек не пустой
	{
		t = s.top();//получаем элемент из вершины стека
		//если он не равен максимальному, заносим элемент в вектор

		if (t != m)v.push_back(t);
		s.pop();//удаляем элемент из стека
	}
	s = copy_vector_to_stack(v);//копируем вектор в стек
}
//деление на минимальный
void Delenie(St& s)
{
	Time m = Min(s);//находим минимальный элемент
	Vec v;
	Time t;
	while (!s.empty())//пока стек не пустой
	{
		t = s.top(); //получаем элемент из вершины
			v.push_back(t / m);//делим t на минимальный и добавляем в вектор
		s.pop();//удаляем элемент из вершины
	}
	s = copy_vector_to_stack(v);//копируем вектор в стек
}
void dobavlenie(St& s)
{
	Time sr = Srednee(s);//находим минимальный элемент
	Vec v;
	Time t;
	while (!s.empty())//пока стек не пустой
	{
		t = s.top(); //получаем элемент из вершины
		v.push_back(t + sr);//делим t на минимальный и добавляем в вектор
		s.pop();//удаляем элемент из вершины
	}
	s = copy_vector_to_stack(v);//копируем вектор в стек
}


void main()
{
	Time t;
	St s;
	int n;

	cout << "n?";
	cin >> n;
	s = make_stack(n);//создать стек
	print_stack(s);//печать стека
	t =Max(s);//вычисляем среднее
	cout << "Max=" << Max(s) << endl;
	cout << "Add max:" << endl;

	Add_to_stack(s, t,1);//добавление элемента
	print_stack(s);//печать стека
	
	cout << "Delete min:" << endl;
	Delete_from_stack(s);
	print_stack(s);
	
	cout << "dobavlenie:" << endl;
	dobavlenie(s);
	print_stack(s);
}